# Дипломный проект «Поисковая система»

* [Рекомендации по работе над дипломом](#Рекомендации-по-работе-над-дипломом).
* [Описание](#описание).
* [Поисковая система](#поисковая-система):
    * [программа «индексатор»](#программа-индексатор),
    * [индексация](#индексация),
    * [параметры индексации](#Параметры-индексации),
    * [программа-поисковик](#программа-поисковик),
    * [база данных](#база-данных),
    * [Что является итогом работы](#что-является-итогом-работы).
* [Этапы реализации программы](#этапы-реализации-программы).
* [Техническое задание](#техническое-задание).
* [Критерии оценки](#критерии-оценки).
* [Полезные материалы](#полезные-материалы).
* [Как задавать вопросы руководителю по дипломной работе](#как-задавать-вопросы-руководителю-по-дипломной-работе).

---
# Рекомендации по работе над дипломом

1. Не откладывайте надолго начало работы над дипломом. В таком случае у вас останется больше времени на получение рекомендаций от руководителя и доработку.
2. Разбейте работу над дипломом на части. Выполняйте их поочерёдно. Вы будете успевать учитывать комментарии от руководителя и не терять мотивацию на полпути.
3. Сдавайте работу на проверку частями. Не ждите, когда выполните всё задание полностью.
---

# Описание
Напишите поисковую систему, которая выполняет поиск среди текстовых документов в файловой системе.

Поисковая система будет получать данные из текстовых файлов, строить поисковые индексы и по запросу выдавать релевантные результаты поисковой выдачи.

Поисковая система будет состоять из следующих частей:
* программа «Индексатор». Это программа, задача которого — парсить текстовые файлы в файловой системе и строить индексы исходя из частоты слов в документах;
* программа-поисковик. Это программа, задача которой — принимать запросы и возвращать результаты поиска.

Напишите обе программы, в соответствии с требованиями, изложенными ниже.

Для хранения информации следует использовать базу данных PostgreSQL.

Для реализации графического интерфейса используйте классы и методы Qt.

При выполнении программы предпочтительно использовать классы, методы и контейнеры библиотеки Qt.

# Поисковая система
## Программа «Индексатор»
Если в файловой системе слишком много текстовых файлов, то каждый поисковый запрос занимает много времени. Чтобы решить эту проблему, использвается программа «Индексатор». Эта программа запускается и заранее анализирует файлы в файловой системе, собирая информацию о том, какие слова встречаются в каких файлах.

## Индексация
Программа «Индексатор» это консольное приложение, которое при запуске получает название каталога (папки) в файловой системе, в котором нужно выполнить индексацию. Дальше эта программа переходит от файла к файлу, загружая текстовое содержимое этого файла. Программа «Индексатор» должна обходить каталог (папку) рекурсивно - это значит, что если в каталоге есть другие каталоги, то программа должна проанализировать файлы и в этих каталогах. Если в этих каталогах тоже есть другие каталоги - нужно проиндексировать файлы и там тоже, и так далее.

Реализуйте обработку каждого текстового файла в программе «Индексатор» по следующим правилам:
* текст очищается от знаков препинания, табуляции, переносов строк и т. д. Остаются только слова, разделённые пробелами;
* слова переводятся в нижний регистр — для этого вы можете использовать метод toLower() класса QString. Для простоты можно также отбрасывать все слова короче трёх или длиннее 32 символов;
* анализируется частотность слов в тексте. Программа считает, сколько раз встречается каждое слово в тексте;
* информация о словах и о частотности сохраняется в базу данных.

Для хранения информации о частотности слов рекомендуется использовать две таблицы — «Документы» и «Слова» — и реализовать между ними связь «многие-ко-многим» с помощью промежуточной таблицы. В эту же промежуточную таблицу будет записана частота использования слова в документе. Однако конечное решение о том, как хранить данные в базе и какая будет структура базы данных, должны принять вы. Напишите код, который создает структуру базы данных. Таблицы должны создаваться автоматически при первом запуске программы «Индексатор».

## Параметры индексации

Параметры индексации должны храниться в ini-файле, который парсится при старте программы. Для работы с файлом конфигурации можете использовать класс QSettings.

В ini-файле конфигурации задайте параметры работы программы «Индексатор»:
 - С какого каталога следует начать индексацию документов. Это должна быть строка, например "C:\Work\Documents", в файле может быть несколько каталогов.
 - Какие расширения файлов следует учитывать. Это должна быть строка, в которой записаны расширения файлов, разделенных запятой, например "txt,md,ini,csv"

## Программа-поисковик

Программа-поисковик выполняет поиск по базе данных, ранжирует результат и возвращает его пользователю. В настоящих поисковых системах ранжирование выполняется по множеству критериев, однако для простоты будем ранжировать страницу по частоте упоминания искомых слов в документе.

Для программы поисковик реализуйте графический интерфейс, который должен иметь строку ввода поискового запроса, и текстовое поле для вывода результатов поискового запроса.

В отдельной вкладке программа должна выводить:

* все слова содержащиеся в БД и их частоту появления
* если вы совершили запрос, по нжатию на отдельную кнопку (до совершения запроса она должна быть заблокирована) программа должна выводить все найденные документы и их релевантность

При запуске программы в поле запроса необходимо ввести поисковый запрос в виде списка слов разделенных пробелами. Например: «‎привет мир».

После того как пользователь введет свой запрос нажмет кнопку "Искать" или ENTER происходит извлечение из базы данных результата запроса и его ранжирование, а затем на экран выводится отсортированный список из результатов поиска.

Для простоты запрос можно анализировать только в виде слов, разделённых пробелами. Все прочие знаки препинания игнорируйте. Можно также ограничить длину запроса — не более четырёх слов. 

Для извлечения данных напишите SQL-запрос. Запрос должен быть следующим: взять документы, в которых встречаются все слова из запроса, и отсортировать их по суммарному количеству упоминаний слов в документе.

Приведём пример для запроса «‎привет мир». Предположим, если в документе A слово «‎привет» встречается 10 раз, а слово «‎мир» четыре раза, то этот документ имеет релевантность 10 + 4 = 14. Если в документе B слово «‎привет» встречается три раза, а слово «‎мир» восемь раз, то релевантность его равна 3 + 8 = 11, и он будет находиться ниже в выдаче.

Для простоты можете ограничить выдачу, выдавая не более чем 10 результатов поиска.

После выполнения запроса программа должна вывести на экран результаты поиска — названия файлов, в которых содержатся запрашиваемые слова. Результаты должны быть отсортированы по убыванию.

В случае если результатов не найдено, на экране отобразите соответствующее сообщение.

В случае если при работе программы возникла ошибка, на экране также отобразите сообщение о внутренней ошибке. Для отображения ошибки используйте QMessageBox


## База данных
Для выполнения задания рекомендуется использовать базу данных PostgreSQL.

Для подключения к базе данных используйте модуль QtSQL.

Настройки базы данных (хост, порт, название БД, имя пользователя, пароль) храните в ini-файле, который должен анализироваться при запуске программы. Для работы с файлом конфигурации можете использовать класс QSettings

При первом запуске программы «‎Индексатор» следует выполнить создание таблиц базы данных, используя запрос `CREATE TABLE IF NOT EXISTS`.


# Что является итогом работы
1. Репозиторий на GitHub с исходным кодом вашего проекта и ini-файлы конфигурации.

# Этапы реализации программы
1. Анализ требований, проектирование структуры базы данных
2. Разработка программы «‎Индексатор»
3. Разработка программы «‎Поисковик»
4. Тестирование и отладка

# Техническое задание
1. Реализуйте программу «‎Индексатор» в соответствии с требованиями, изложенными выше
2. Реализуйте программу «‎Поисковик» в соответствии с требованиями, изложенными выше
3. Выложите проект на GitHub в виде исходного кода

# Критерии оценки
1. Реализовано техническое задание.
2. Приложение полностью функционирует: нет логически недоделанных частей, заглушек, TODO и т. д.
3. Нет явных изъянов в архитектуре, «плохо пахнущего кода», проблем с многопоточностью, утечек памяти, неотловленных исключений и т. д.

---

# Как задавать вопросы руководителю по дипломной работе

1. Если у вас возник вопрос, попробуйте сначала самостоятельно найти ответ в интернете. Навык поиска информации пригодится вам в любой профессиональной деятельности. Если ответ не нашёлся, можно уточнить у руководителя по дипломной работе.
2. Если у вас набирается несколько вопросов, присылайте их в виде нумерованного списка. Так дипломному руководителю будет проще отвечать на каждый из них.
3. Для лучшего понимания контекста прикрепите к вопросу скриншоты и стрелкой укажите, что именно вызывает затруднения. Программу для создания скриншотов можно скачать [по ссылке](https://app.prntscr.com/ru/).
4. По возможности задавайте вопросы в комментариях к коду.
5. Формулируйте свои вопросы чётко, дополняя их деталями. На сообщения «Ничего не работает», «Всё сломалось» дипломный руководитель не сможет дать комментарии без дополнительных уточнений. Это затянет процесс получения ответа. 
6. Постарайтесь набраться терпения в ожидании ответа на свои вопросы. Дипломные руководители Нетологии — практикующие разработчики, поэтому они не всегда могут отвечать моментально. Зато их практика даёт возможность делиться с вами не только теорией, но и ценным прикладным опытом.  

Успешной работы!
